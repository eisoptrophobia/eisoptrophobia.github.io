<!DOCTYPE html>
<html>
 <head>
  <title>CLL Calculator</title>
  <script>
  
  clls = [-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150];
  statavg = [0.2857,0.7143,1.1429,1.5714,2,2.4286,2.8449,3.2493,3.6422,4.0239,4.3946,4.7548,5.1046,5.4445,5.7746,6.0954,6.4069,6.7096,7.0036,7.2892,7.5667,7.8362,8.098,8.3524,8.5994,8.8395,9.0726,9.2991,9.5191,9.7329,9.9405,10.1422,10.3382,10.5285,10.7134,10.893,11.0675,11.237,11.4017,11.5616,11.717,11.8679,12.0146,12.157,12.2954,12.4298,12.5604,12.6872,12.8104,12.9301,13.0464,13.1594,13.2691,13.3757,13.4793,13.5799,13.6776,13.7725,13.8647,13.9543,14.0413,14.1258,14.208,14.2877,14.3652,14.4405,14.5136,14.5847,14.6537,14.7207,14.7859,14.8491,14.9106,14.9703,15.0283,15.0846,15.1393,15.1925,15.2441,15.2943,15.343,15.3904,15.4364,15.481,15.5244,15.5666,15.6076,15.6473,15.686,15.7235,15.76,15.7954,15.8298,15.8633,15.8957,15.9273,15.9579,15.9877,16.0166,16.0447,16.072,16.0986,16.1243,16.1493,16.1736,16.1972,16.6258,17.0544,17.483,17.9115,18.3401,18.7687,19.1972,19.6258,20.0544,20.483,20.9115,21.3401,21.7687,22.1972,22.6258,23.0544,23.483,23.9115,24.3401,24.7687,25.1972,25.6258,26.0544,26.483,26.9115,27.3401,27.7687,28.1972,28.6258,29.0544,29.483,29.9115,30.3401,30.7687,31.1972,31.6258,32.0544,32.483,32.9115,33.3401,33.7687,34.1972,34.6258,35.0544,35.483,35.9115,36.3401,36.7687,37.1972,37.6258];
  hpss = [1,4,7,10,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,257,259,261,263,265,267,269,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,311,313,315];
  
  function closest (num, arr) {
    var curr = arr[0];
    var diff = Math.abs (num - curr);
    for (var val = 0; val < arr.length; val++) {
      var newdiff = Math.abs (num - arr[val]);
      if (newdiff < diff) {
        diff = newdiff;
        curr = val;
      }
    }
    return curr;
  }
  
  function calculate (acc,dmg,spd,eva,arm,inT,cha,hps) {
    return(Math.round(((2 * clls[closest((acc + dmg + (2 * spd) + eva + arm + (0.5 * (inT + cha))) / 7,statavg)]) + clls[closest(hps,hpss)]) / 3));
  }
  
  function calc () {
    var acc = document.getElementById("acc").value;
    var dmg = document.getElementById("dmg").value;
    var spd = document.getElementById("spd").value;
    var eva = document.getElementById("eva").value;
    var arm = document.getElementById("arm").value;
    var inT = document.getElementById("inT").value;
    var cha = document.getElementById("cha").value;
    var hps = document.getElementById("hps").value;
    var v = calculate(acc,dmg,spd,eva,arm,inT,cha,hps).toString();
    var out = document.getElementById("out");
    var output = "CLL: " + v;
    out.innerHTML = output;
  }
  
  </script>
 </head>
 <body>
  <div ng-app="myApp" ng-controller="myCtrl">
   <ul>
    <li>ACC: <input type="number" step="0.5" id="acc"></li>
    <li>DMG: <input type="number" step="0.5" id="dmg"></li>
    <li>SPD: <input type="number" step="0.5" id="spd"></li>
    <li>EVA: <input type="number" step="0.5" id="eva"></li>
    <li>ARM: <input type="number" step="0.5" id="arm"></li>
    <li>INT: <input type="number" step="0.5" id="inT"></li>
    <li>CHA: <input type="number" step="0.5" id="cha"></li>
    <li>HPS: <input type="number" step="0.5" id="hps"></li>
   </ul>
   <button onclick="calc()">Calculate</button>
   <p id="out"></p>
  </div>
 </body>
</html>
